<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneMindAI Architecture - Deep Dive Presentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; overflow-x: hidden; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .slide { background: white; border-radius: 20px; padding: 60px; margin-bottom: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); animation: slideIn 0.6s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        h1 { font-size: 3em; color: #667eea; margin-bottom: 20px; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        h2 { font-size: 2.2em; color: #764ba2; margin-bottom: 30px; border-bottom: 4px solid #667eea; padding-bottom: 15px; }
        h3 { font-size: 1.6em; color: #5a67d8; margin: 30px 0 15px 0; }
        .flow-diagram { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 15px; padding: 40px; margin: 30px 0; }
        .flow-step { background: white; border-left: 5px solid #667eea; padding: 25px; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s; position: relative; }
        .flow-step:hover { transform: translateX(10px); box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
        .flow-step::before { content: attr(data-step); position: absolute; left: -15px; top: 50%; transform: translateY(-50%); background: #667eea; color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2em; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .arrow { text-align: center; font-size: 2em; color: #667eea; margin: 10px 0; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .code-block { background: #1e1e1e; color: #d4d4d4; padding: 25px; border-radius: 10px; overflow-x: auto; margin: 20px 0; font-family: 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; }
        .code-block .keyword { color: #569cd6; }
        .code-block .string { color: #ce9178; }
        .code-block .comment { color: #6a9955; }
        .code-block .function { color: #dcdcaa; }
        .code-block .variable { color: #9cdcfe; }
        .comparison-table { width: 100%; border-collapse: collapse; margin: 30px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .comparison-table th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; text-align: left; font-size: 1.1em; }
        .comparison-table td { padding: 18px; border-bottom: 1px solid #e2e8f0; background: white; }
        .comparison-table tr:hover td { background: #f7fafc; }
        .highlight { background: linear-gradient(120deg, #ffd700 0%, #ffed4e 100%); padding: 3px 8px; border-radius: 4px; font-weight: bold; }
        .badge { display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 0.85em; font-weight: bold; margin: 5px; }
        .badge-success { background: #48bb78; color: white; }
        .badge-warning { background: #ed8936; color: white; }
        .badge-info { background: #4299e1; color: white; }
        .visual-box { background: white; border: 3px solid #667eea; border-radius: 15px; padding: 25px; width: 22%; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: inline-block; margin: 10px; }
        .icon { font-size: 3em; margin-bottom: 15px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin: 30px 0; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .stat-number { font-size: 3em; font-weight: bold; margin-bottom: 10px; }
        .stat-label { font-size: 1.1em; opacity: 0.9; }
    </style>
</head>
<body>
    <div class="container">
        <div class="slide">
            <h1>ğŸš€ OneMindAI Architecture</h1>
            <h2 style="text-align: center; border: none; color: #667eea;">Deep Dive: API to Screen Flow</h2>
            <p style="text-align: center; font-size: 1.3em; color: #666; margin-top: 30px;">A Comprehensive Visual Guide to Multi-AI Engine Streaming Architecture</p>
            <div class="stats-grid" style="margin-top: 60px;">
                <div class="stat-card"><div class="stat-number">10+</div><div class="stat-label">AI Providers</div></div>
                <div class="stat-card"><div class="stat-number">2,680</div><div class="stat-label">Lines of Code</div></div>
                <div class="stat-card"><div class="stat-number">Real-Time</div><div class="stat-label">Streaming</div></div>
                <div class="stat-card"><div class="stat-number">6</div><div class="stat-label">File Types</div></div>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ”„ Complete Data Flow with Function Tracking</h2>
            <div class="flow-diagram">
                <div class="flow-step" data-step="1">
                    <h3>User Action: Click "Run Live"</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>runAll()</code> (Line 819)</p>
                    <p><strong>â° When Called:</strong> User clicks "Run Live" button</p>
                    <p><strong>â“ Why Called:</strong> Initiates parallel streaming from all selected AI engines</p>
                    <div class="code-block">
<span class="keyword">async function</span> <span class="function">runAll</span>() {
    <span class="comment">// Validates prompt and selected engines</span>
    <span class="keyword">const</span> <span class="variable">selectedEngineIds</span> = <span class="function">Object.keys</span>(<span class="variable">selected</span>)
        .<span class="function">filter</span>(<span class="variable">id</span> => <span class="variable">selected</span>[<span class="variable">id</span>]);
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Array of selected engine IDs: <code>["openai", "anthropic", "gemini"]</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Calls <code>streamFromProvider()</code> for each engine in parallel</p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="2">
                    <h3>Prompt Enhancement & File Processing</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>streamFromProvider(e, prompt, outCap)</code> (Line 299)</p>
                    <p><strong>â° When Called:</strong> Immediately after <code>runAll()</code> for each selected engine</p>
                    <p><strong>â“ Why Called:</strong> Enhances prompt with uploaded file content and prepares API call</p>
                    <div class="code-block">
<span class="keyword">async function*</span> <span class="function">streamFromProvider</span>(<span class="variable">e</span>, <span class="variable">prompt</span>, <span class="variable">outCap</span>) {
    <span class="keyword">let</span> <span class="variable">enhancedPrompt</span> = <span class="variable">prompt</span>;
    <span class="comment">// Add TXT files</span>
    <span class="keyword">const</span> <span class="variable">textFiles</span> = <span class="variable">uploadedFiles</span>.<span class="function">filter</span>(<span class="variable">f</span> => <span class="variable">f</span>.<span class="variable">name</span>.<span class="function">endsWith</span>(<span class="string">'.txt'</span>));
    <span class="comment">// Add Word docs using mammoth</span>
    <span class="comment">// Add JSON files</span>
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Enhanced prompt with file content: <code>"Analyze this data:\n\n--- File: data.json ---\n{...}"</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Calls provider-specific API (OpenAI, Claude, Gemini, etc.)</p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="3">
                    <h3>Provider-Specific API Call</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Functions:</strong> Multiple provider branches (Lines 370-795)</p>
                    <p><strong>â° When Called:</strong> After prompt enhancement in <code>streamFromProvider()</code></p>
                    <p><strong>â“ Why Called:</strong> Makes actual HTTP/SDK call to AI provider based on engine type</p>
                    <div class="code-block">
<span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">provider</span> === <span class="string">'openai'</span>) {
    <span class="keyword">const</span> <span class="variable">stream</span> = <span class="keyword">await</span> <span class="variable">client</span>.<span class="variable">chat</span>.<span class="variable">completions</span>.<span class="function">create</span>({...});
} <span class="keyword">else if</span> (<span class="variable">e</span>.<span class="variable">provider</span> === <span class="string">'anthropic'</span>) {
    <span class="keyword">const</span> <span class="variable">stream</span> = <span class="keyword">await</span> <span class="variable">anthropic</span>.<span class="variable">messages</span>.<span class="function">stream</span>({...});
}
                    </div>
                    <span class="badge badge-info">Claude SDK</span>
                    <span class="badge badge-success">OpenAI SDK</span>
                    <span class="badge badge-warning">Gemini SDK</span>
                    <p><strong>ğŸ“¤ Output:</strong> Async stream object ready to yield chunks</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Iterates stream to extract raw chunks</p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="4">
                    <h3>Raw Streaming Response</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>for await...of</code> loop (Lines 478-483 for OpenAI)</p>
                    <p><strong>â° When Called:</strong> Immediately after API call returns stream</p>
                    <p><strong>â“ Why Called:</strong> Extracts text content from each JSON chunk</p>
                    <div class="code-block">
<span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="variable">stream</span>) {
    <span class="keyword">const</span> <span class="variable">content</span> = <span class="variable">chunk</span>.<span class="variable">choices</span>[<span class="string">0</span>]?.<span class="variable">delta</span>?.<span class="variable">content</span>;
    <span class="keyword">if</span> (<span class="variable">content</span>) <span class="keyword">yield</span> <span class="variable">content</span>;
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Individual text chunks: <code>"Hello"</code>, <code>" world"</code>, <code>"!"</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Each yielded chunk triggers state update in <code>runAll()</code></p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="5">
                    <h3>Content Accumulation</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> Loop in <code>runAll()</code> (Lines 840-843)</p>
                    <p><strong>â° When Called:</strong> For each chunk yielded by <code>streamFromProvider()</code></p>
                    <p><strong>â“ Why Called:</strong> Accumulates chunks into complete response string</p>
                    <div class="code-block">
<span class="keyword">let</span> <span class="variable">fullContent</span> = <span class="string">''</span>;
<span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="function">streamFromProvider</span>(<span class="variable">eng</span>, <span class="variable">prompt</span>, <span class="variable">outCap</span>)) {
    <span class="variable">fullContent</span> += <span class="variable">chunk</span>;
    <span class="function">setStreamingStates</span>(<span class="variable">prev</span> => ({...<span class="variable">prev</span>, [<span class="variable">eng</span>.<span class="variable">id</span>]: {<span class="variable">content</span>: <span class="variable">fullContent</span>}}));
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Accumulated string: <code>"Hello world!"</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Calls <code>setStreamingStates()</code> to update React state</p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="6">
                    <h3>React State Update</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>setStreamingStates()</code> (React useState setter)</p>
                    <p><strong>â° When Called:</strong> After each chunk accumulation</p>
                    <p><strong>â“ Why Called:</strong> Triggers React re-render to display updated content</p>
                    <div class="code-block">
<span class="function">setStreamingStates</span>(<span class="variable">prev</span> => ({
    ...<span class="variable">prev</span>,
    [<span class="variable">eng</span>.<span class="variable">id</span>]: {
        <span class="variable">content</span>: <span class="variable">fullContent</span>,
        <span class="variable">isStreaming</span>: <span class="keyword">true</span>
    }
}));
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Updated state object: <code>{"openai": {content: "Hello world!", isStreaming: true}}</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> React passes updated content to <code>EnhancedMarkdownRenderer</code></p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="7">
                    <h3>Markdown Processing</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>marked.parse(processedText)</code> (Line 135)</p>
                    <p><strong>â° When Called:</strong> Inside <code>useEffect</code> when content prop changes</p>
                    <p><strong>â“ Why Called:</strong> Converts Markdown syntax to HTML for browser rendering</p>
                    <div class="code-block">
<span class="keyword">const</span> <span class="variable">html</span> = <span class="variable">marked</span>.<span class="function">parse</span>(<span class="variable">processedText</span>);
<span class="comment">// Input: "**bold** text"</span>
<span class="comment">// Output: "&lt;strong&gt;bold&lt;/strong&gt; text"</span>
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> HTML string with proper tags</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Sets processed HTML to state, triggers DOM injection</p>
                </div>
                <div class="arrow">â†“</div>
                <div class="flow-step" data-step="8">
                    <h3>DOM Injection & Display</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> React JSX render with <code>dangerouslySetInnerHTML</code> (Line 263)</p>
                    <p><strong>â° When Called:</strong> After <code>setProcessedContent()</code> updates state</p>
                    <p><strong>â“ Why Called:</strong> Injects HTML into DOM for user to see formatted content</p>
                    <div class="code-block">
<span class="keyword">return</span> (
    &lt;<span class="variable">div</span> 
        <span class="variable">dangerouslySetInnerHTML</span>={{<span class="variable">__html</span>: <span class="variable">processedContent</span>}}
        <span class="variable">className</span>=<span class="string">"markdown-content"</span>
    /&gt;
);
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Formatted, styled content visible in browser</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> User sees the response! Process complete for this chunk.</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>ï¿½ Real GPT API Call Example - Raw Journey</h2>
            <p style="font-size: 1.2em; margin-bottom: 30px;">Let's trace a real GPT-4 API call asking: <span class="highlight">"Create a table comparing React and Vue"</span></p>
            
            <div class="flow-diagram">
                <div class="flow-step" data-step="1">
                    <h3>ğŸ“¡ Raw API Request (OpenAI SDK)</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>client.chat.completions.create()</code> (Lines 441-500)</p>
                    <p><strong>â° When Called:</strong> Inside <code>streamFromProvider()</code> when provider is 'openai'</p>
                    <p><strong>â“ Why Called:</strong> Initiates streaming API call to OpenAI's GPT model</p>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="keyword">const</span> <span class="variable">stream</span> = <span class="keyword">await</span> <span class="variable">client</span>.<span class="variable">chat</span>.<span class="variable">completions</span>.<span class="function">create</span>({
    <span class="variable">model</span>: <span class="string">"gpt-4.1"</span>,
    <span class="variable">messages</span>: [{ <span class="variable">role</span>: <span class="string">'user'</span>, <span class="variable">content</span>: <span class="string">"Create a table comparing React and Vue"</span> }],
    <span class="variable">stream</span>: <span class="keyword">true</span>,
    <span class="variable">max_tokens</span>: <span class="string">4000</span>
});
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> AsyncIterable stream object</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> OpenAI server starts sending JSON chunks</p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="2">
                    <h3>ğŸ“¥ Raw API Response Chunks (NO FORMATTING YET)</h3>
                    <p><strong>ğŸ“ File:</strong> Network response from OpenAI servers</p>
                    <p><strong>ğŸ”§ Function:</strong> Server-Sent Events (SSE) stream</p>
                    <p><strong>â° When Called:</strong> Immediately after API request is sent</p>
                    <p><strong>â“ Why Called:</strong> OpenAI streams response in real-time as it generates</p>
                    <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #ffc107;">
                        <strong>âš ï¸ IMPORTANT: This is RAW data - No libraries applied yet!</strong>
                    </div>
                    <div class="code-block" style="font-size: 0.8em;">
<span class="comment">// Chunk 1</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">"Here"</span> }}]}

<span class="comment">// Chunk 2</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">"'s"</span> }}]}

<span class="comment">// Chunk 3</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" a"</span> }}]}

<span class="comment">// Chunk 4</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" comparison"</span> }}]}

<span class="comment">// Chunk 5</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">":\n\n"</span> }}]}

<span class="comment">// Chunk 6</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">"|"</span> }}]}

<span class="comment">// Chunk 7</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" Feature"</span> }}]}

<span class="comment">// ... continues with more chunks ...</span>
                    </div>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="3">
                    <h3>ğŸ”— Chunk Extraction</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>for await...of</code> loop (Lines 478-483)</p>
                    <p><strong>â° When Called:</strong> As each JSON chunk arrives from OpenAI</p>
                    <p><strong>â“ Why Called:</strong> Extracts only text content from JSON, discards metadata</p>
                    <div class="code-block">
<span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="variable">stream</span>) {
    <span class="keyword">const</span> <span class="variable">content</span> = <span class="variable">chunk</span>.<span class="variable">choices</span>[<span class="string">0</span>]?.<span class="variable">delta</span>?.<span class="variable">content</span>;
    <span class="keyword">if</span> (<span class="variable">content</span>) {
        <span class="keyword">yield</span> <span class="variable">content</span>;  <span class="comment">// â† Extract ONLY the text</span>
    }
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Pure text chunks: <code>"Here"</code>, <code>"'s"</code>, <code>" a"</code>, <code>" comparison"</code>, <code>":\n\n"</code>, <code>"|"</code>, <code>" Feature"</code></p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Each yielded chunk goes to accumulation loop in <code>runAll()</code></p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="4">
                    <h3>ğŸ“ Accumulated Plain Text</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> String concatenation in <code>runAll()</code> loop (Lines 840-843)</p>
                    <p><strong>â° When Called:</strong> For every chunk received from <code>streamFromProvider()</code></p>
                    <p><strong>â“ Why Called:</strong> Builds complete response by joining all chunks</p>
                    <div style="background: #e8f5e9; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #4caf50;">
                        <strong>âœ… This is PURE MARKDOWN - No HTML yet!</strong>
                    </div>
                    <div class="code-block">
<span class="variable">fullContent</span> = <span class="string">`Here's a comparison:

| Feature | React | Vue |
|---------|-------|-----|
| Learning Curve | Moderate | Easy |
| Performance | Excellent | Excellent |
| Community | Large | Growing |
| Syntax | JSX | Template |

**Key Differences:**
- React uses JSX
- Vue uses templates
- Both are component-based`</span>
                    </div>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="5">
                    <h3>ğŸ’¾ Stored in React State</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>setStreamingStates()</code> (React useState setter)</p>
                    <p><strong>â° When Called:</strong> After each chunk is added to <code>fullContent</code></p>
                    <p><strong>â“ Why Called:</strong> Updates React state to trigger re-render with new content</p>
                    <p><strong>Still NO formatting!</strong></p>
                    <div class="code-block">
<span class="variable">streamingStates</span>[<span class="string">"openai"</span>] = {
    <span class="variable">content</span>: <span class="string">"Here's a comparison:\n\n| Feature | React |..."</span>,  <span class="comment">// â† RAW MARKDOWN</span>
    <span class="variable">isStreaming</span>: <span class="keyword">false</span>
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> State object with raw markdown string</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> React passes content prop to <code>EnhancedMarkdownRenderer</code></p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="6">
                    <h3>ğŸ¨ EnhancedMarkdownRenderer Receives Content</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>EnhancedMarkdownRenderer({content})</code> (Line 21)</p>
                    <p><strong>â° When Called:</strong> When React re-renders due to state change</p>
                    <p><strong>â“ Why Called:</strong> Component receives updated content prop to process and display</p>
                    <div class="code-block">
<span class="keyword">export default function</span> <span class="function">EnhancedMarkdownRenderer</span>({ <span class="variable">content</span>, <span class="variable">isStreaming</span> }) {
    <span class="comment">// content = raw markdown string from state</span>
    <span class="comment">// Still no formatting!</span>
    <span class="keyword">const</span> [<span class="variable">processedContent</span>, <span class="variable">setProcessedContent</span>] = <span class="function">useState</span>(<span class="string">''</span>);
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Component initialized with raw markdown</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> <code>useEffect</code> hook triggers processing</p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="7">
                    <h3>ğŸ“š LIBRARIES START PROCESSING HERE!</h3>
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>useEffect(() => {...}, [content])</code> (Lines 58-167)</p>
                    <p><strong>â° When Called:</strong> Whenever <code>content</code> prop changes</p>
                    <p><strong>â“ Why Called:</strong> Processes raw markdown through multiple libraries</p>
                    
                    <h4 style="color: #e91e63; margin-top: 25px;">ğŸ”§ Library 1: Table Detection & Chart Conversion</h4>
                    <p><strong>ğŸ“ File:</strong> <code>src/lib/chart-utils.ts</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>convertTablesToCharts(content)</code> (Line 69)</p>
                    <p><strong>â° When Called:</strong> First step in useEffect, before other processing</p>
                    <p><strong>â“ Why Called:</strong> Detects markdown tables with numeric data and generates interactive charts</p>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="keyword">const</span> { <span class="variable">content</span>: <span class="variable">contentWithChartPlaceholders</span>, <span class="variable">charts</span>: <span class="variable">detectedTableCharts</span> } = 
    <span class="function">convertTablesToCharts</span>(<span class="variable">content</span>);
<span class="comment">// Scans for tables, checks if chartable, generates ECharts config</span>
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Modified content with chart placeholders + array of chart configs</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Proceeds to code block extraction</p>

                    <h4 style="color: #e91e63; margin-top: 25px;">ğŸ”§ Library 2: Code Block Extraction (Line 81-103)</h4>
                    <p><strong>ğŸ”§ Function:</strong> <code>RegExp.exec()</code> with pattern <code>/```([^\n]*)\n([\s\S]*?)```/g</code></p>
                    <p><strong>â° When Called:</strong> After table detection</p>
                    <p><strong>â“ Why Called:</strong> Finds code blocks for syntax highlighting and chart rendering</p>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="keyword">const</span> <span class="variable">codeBlockRegex</span> = <span class="string">/```([^\n]*)\n([\s\S]*?)```/g</span>;
<span class="keyword">while</span> ((<span class="variable">match</span> = <span class="variable">codeBlockRegex</span>.<span class="function">exec</span>(<span class="variable">contentWithChartPlaceholders</span>)) !== <span class="keyword">null</span>) {
    <span class="keyword">const</span> <span class="variable">language</span> = <span class="variable">match</span>[<span class="string">1</span>].<span class="function">trim</span>();
    <span class="keyword">const</span> <span class="variable">code</span> = <span class="variable">match</span>[<span class="string">2</span>].<span class="function">trim</span>();
    <span class="comment">// Extracts Python/JavaScript code blocks</span>
}
                    </div>
                    <p><strong>ğŸ“¤ Output:</strong> Array of code blocks with language and content</p>
                    <p><strong>â¡ï¸ Next Trigger:</strong> Proceeds to markdown parsing</p>

                    <h4 style="color: #e91e63; margin-top: 25px;">ğŸ”§ Library 2: marked.parse() - Markdown â†’ HTML (Line 126)</h4>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="keyword">const</span> <span class="variable">html</span> = <span class="variable">marked</span>.<span class="function">parse</span>(<span class="variable">processedText</span>);
                    </div>
                    <p><strong>What it does:</strong></p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                        <div style="background: #fff3cd; padding: 15px; border-radius: 8px;">
                            <strong>Input (Markdown):</strong>
                            <pre style="margin-top: 10px; font-size: 0.85em;">| Feature | React |
|---------|-------|
| Syntax  | JSX   |

**Bold text**</pre>
                        </div>
                        <div style="background: #d4edda; padding: 15px; border-radius: 8px;">
                            <strong>Output (HTML):</strong>
                            <pre style="margin-top: 10px; font-size: 0.85em;">&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Feature&lt;/th&gt;
      &lt;th&gt;React&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Syntax&lt;/td&gt;
      &lt;td&gt;JSX&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;strong&gt;Bold text&lt;/strong&gt;</pre>
                        </div>
                    </div>

                    <h4 style="color: #e91e63; margin-top: 25px;">ğŸ”§ Library 3: ChartCodeRenderer - Python â†’ Plotly (Line 275)</h4>
                    <p><strong>File:</strong> ChartCodeRenderer.tsx</p>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="keyword">if</span> (<span class="variable">code</span>.<span class="function">includes</span>(<span class="string">'matplotlib'</span>) || <span class="variable">code</span>.<span class="function">includes</span>(<span class="string">'plt.'</span>)) {
    <span class="keyword">const</span> <span class="variable">plotlyData</span> = <span class="function">convertMatplotlibToPlotly</span>(<span class="variable">code</span>);
    <span class="keyword">return</span> &lt;<span class="variable">Plot</span> <span class="variable">data</span>={<span class="variable">plotlyData</span>} /&gt;;
}
                    </div>
                    <p><strong>Purpose:</strong> Converts Python matplotlib code to interactive Plotly charts</p>

                    <h4 style="color: #e91e63; margin-top: 25px;">ğŸ”§ Library 4: Mermaid (DISABLED) - Diagrams</h4>
                    <p><strong>File:</strong> EnhancedMarkdownRenderer.tsx Line 89-94</p>
                    <div class="code-block" style="font-size: 0.85em;">
<span class="comment">// DISABLED: Mermaid chart extraction</span>
<span class="function">setMermaidCharts</span>([]);  <span class="comment">// â† Currently not used</span>
                    </div>
                    <p><strong>Status:</strong> Available but not active in current implementation</p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="8">
                    <h3>ğŸ–¼ï¸ DOM Injection (Line 233-237)</h3>
                    <div class="code-block">
&lt;<span class="variable">div</span> 
    <span class="variable">dangerouslySetInnerHTML</span>={{ <span class="variable">__html</span>: <span class="variable">processedContent</span> }}
/&gt;
                    </div>
                    <p><strong>What happens:</strong> Browser renders the HTML and displays formatted table!</p>
                </div>

                <div class="arrow">â†“</div>

                <div class="flow-step" data-step="9">
                    <h3>ğŸ‘ï¸ Final Display - What User Sees</h3>
                    <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #667eea; margin-top: 15px;">
                        <p style="margin-bottom: 15px;">Here's a comparison:</p>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <thead>
                                <tr style="background: #667eea; color: white;">
                                    <th style="padding: 12px; border: 1px solid #ddd;">Feature</th>
                                    <th style="padding: 12px; border: 1px solid #ddd;">React</th>
                                    <th style="padding: 12px; border: 1px solid #ddd;">Vue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Learning Curve</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Moderate</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Easy</td>
                                </tr>
                                <tr style="background: #f7fafc;">
                                    <td style="padding: 10px; border: 1px solid #ddd;">Performance</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Excellent</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Excellent</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Community</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Large</td>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Growing</td>
                                </tr>
                            </tbody>
                        </table>
                        <p style="margin-top: 15px;"><strong>Key Differences:</strong></p>
                        <ul style="margin-left: 25px; margin-top: 10px;">
                            <li>React uses JSX</li>
                            <li>Vue uses templates</li>
                            <li>Both are component-based</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ“š Complete Library Processing Summary</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Library</th>
                        <th>Purpose</th>
                        <th>Input</th>
                        <th>Output</th>
                        <th>Location</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>marked.parse()</strong></td>
                        <td>Markdown â†’ HTML conversion</td>
                        <td>**Bold**, | tables |, lists</td>
                        <td>&lt;strong&gt;, &lt;table&gt;, &lt;ul&gt;</td>
                        <td>EnhancedMarkdownRenderer.tsx:126</td>
                    </tr>
                    <tr>
                        <td><strong>react-plotly.js</strong></td>
                        <td>Python charts â†’ Interactive plots</td>
                        <td>plt.plot(), plt.bar()</td>
                        <td>&lt;Plot&gt; component</td>
                        <td>ChartRenderer.tsx:7</td>
                    </tr>
                    <tr>
                        <td><strong>Mermaid</strong></td>
                        <td>Text diagrams â†’ SVG flowcharts</td>
                        <td>graph TD; A--&gt;B</td>
                        <td>&lt;svg&gt; diagram</td>
                        <td>MermaidChart.tsx (DISABLED)</td>
                    </tr>
                    <tr>
                        <td><strong>Code Block Regex</strong></td>
                        <td>Extract code from markdown</td>
                        <td>```python code```</td>
                        <td>Separate code blocks</td>
                        <td>EnhancedMarkdownRenderer.tsx:66</td>
                    </tr>
                    <tr>
                        <td><strong>dangerouslySetInnerHTML</strong></td>
                        <td>Inject HTML into DOM</td>
                        <td>HTML string</td>
                        <td>Rendered elements</td>
                        <td>EnhancedMarkdownRenderer.tsx:235</td>
                    </tr>
                </tbody>
            </table>

            <h3 style="margin-top: 40px;">ğŸ¯ Key Takeaway</h3>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-top: 20px;">
                <p style="font-size: 1.3em; line-height: 1.8;">
                    <strong>Raw API Response â†’ Accumulated Text â†’ React State â†’ Libraries Process â†’ Formatted Display</strong>
                </p>
                <p style="font-size: 1.1em; margin-top: 15px; opacity: 0.9;">
                    The content stays as PLAIN TEXT until it reaches EnhancedMarkdownRenderer, where marked.parse() converts markdown to HTML, and specialized renderers handle code blocks and charts.
                </p>
            </div>
        </div>

        <div class="slide">
            <h2>ï¿½ Data Transformation Summary</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Stage</th>
                        <th>Format</th>
                        <th>Example</th>
                        <th>Location</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1. API Response</strong></td>
                        <td>Raw chunks</td>
                        <td>"Hello", " world"</td>
                        <td>Provider SDK/Fetch</td>
                    </tr>
                    <tr>
                        <td><strong>2. Accumulated</strong></td>
                        <td>Plain text</td>
                        <td>"Hello world"</td>
                        <td>fullContent variable</td>
                    </tr>
                    <tr>
                        <td><strong>3. State Storage</strong></td>
                        <td>Plain text</td>
                        <td>streamingStates["openai"].content</td>
                        <td>React state</td>
                    </tr>
                    <tr>
                        <td><strong>4. marked.parse()</strong></td>
                        <td>HTML string</td>
                        <td>"&lt;p&gt;Hello world&lt;/p&gt;"</td>
                        <td>EnhancedMarkdownRenderer</td>
                    </tr>
                    <tr>
                        <td><strong>5. DOM Injection</strong></td>
                        <td>Rendered HTML</td>
                        <td>User sees formatted text</td>
                        <td>Browser DOM</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="slide">
            <h2>ğŸ¯ Key Insights</h2>
            <div style="background: #f7fafc; padding: 30px; border-radius: 15px; border-left: 6px solid #667eea; margin: 20px 0;">
                <h3 style="color: #667eea; margin-top: 0;">âœ… No Processing During Streaming</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">Raw chunks are accumulated as-is without any transformation. This ensures maximum streaming performance.</p>
            </div>
            <div style="background: #f7fafc; padding: 30px; border-radius: 15px; border-left: 6px solid #48bb78; margin: 20px 0;">
                <h3 style="color: #48bb78; margin-top: 0;">âš¡ Processing Happens After</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">marked.parse() runs AFTER streaming completes or during React render cycle.</p>
            </div>
            <div style="background: #f7fafc; padding: 30px; border-radius: 15px; border-left: 6px solid #ed8936; margin: 20px 0;">
                <h3 style="color: #ed8936; margin-top: 0;">ğŸ’¾ State Stores Raw Text</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">streamingStates contains unprocessed markdown, not HTML.</p>
            </div>
            <div style="background: #f7fafc; padding: 30px; border-radius: 15px; border-left: 6px solid #4299e1; margin: 20px 0;">
                <h3 style="color: #4299e1; margin-top: 0;">ğŸŒ Libraries Run Client-Side</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">All processing (marked, mermaid, plotly) happens in the browser, not on the server.</p>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ”¬ How to Intercept Raw Response</h2>
            <h3>Method 1: Console Logging</h3>
            <p>Add this to OneMindAI.tsx Line 841:</p>
            <div class="code-block">
<span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="function">streamFromProvider</span>(<span class="variable">e</span>, <span class="variable">prompt</span>, <span class="variable">outCap</span>)) {
    <span class="variable">console</span>.<span class="function">log</span>(<span class="string">'ğŸ”´ RAW CHUNK:'</span>, <span class="variable">chunk</span>);
    <span class="variable">fullContent</span> += <span class="variable">chunk</span>;
    <span class="variable">console</span>.<span class="function">log</span>(<span class="string">'ğŸ”µ ACCUMULATED:'</span>, <span class="variable">fullContent</span>);
    <span class="function">updateStreamingContent</span>(<span class="variable">e.id</span>, <span class="variable">fullContent</span>, <span class="keyword">true</span>);
}
            </div>
            <h3 style="margin-top: 40px;">Method 2: Network Tab</h3>
            <ol style="font-size: 1.1em; line-height: 2; margin-left: 30px;">
                <li>Open DevTools (F12)</li>
                <li>Go to Network tab</li>
                <li>Filter by "Fetch/XHR"</li>
                <li>Run query</li>
                <li>Click on API request</li>
                <li>View "Response" tab</li>
                <li>See raw Server-Sent Events</li>
            </ol>
        </div>

        <div class="slide">
            <h2>ğŸ“š File Structure</h2>
            <div style="background: #1e1e1e; color: #d4d4d4; padding: 30px; border-radius: 10px; font-family: 'Courier New', monospace;">
<span style="color: #569cd6;">src/</span>
â”œâ”€â”€ <span style="color: #ce9178;">OneMindAI.tsx</span>           <span style="color: #6a9955;">// Main component (2,680 lines)</span>
â”œâ”€â”€ <span style="color: #569cd6;">components/</span>
â”‚   â”œâ”€â”€ <span style="color: #ce9178;">EnhancedMarkdownRenderer.tsx</span>  <span style="color: #6a9955;">// Markdown â†’ HTML</span>
â”‚   â”œâ”€â”€ <span style="color: #ce9178;">FileUploadZone.tsx</span>           <span style="color: #6a9955;">// Drag & drop</span>
â”‚   â””â”€â”€ <span style="color: #ce9178;">ChartRenderer.tsx</span>            <span style="color: #6a9955;">// Python â†’ Plotly</span>
â”œâ”€â”€ <span style="color: #569cd6;">lib/</span>
â”‚   â”œâ”€â”€ <span style="color: #ce9178;">file-utils.ts</span>               <span style="color: #6a9955;">// File processing</span>
â”‚   â”œâ”€â”€ <span style="color: #ce9178;">chart-utils.ts</span>              <span style="color: #6a9955;">// Chart conversion</span>
â”‚   â””â”€â”€ <span style="color: #ce9178;">streaming-client.ts</span>         <span style="color: #6a9955;">// Streaming helpers</span>
â””â”€â”€ <span style="color: #569cd6;">vite.config.ts</span>              <span style="color: #6a9955;">// Proxy config</span>
            </div>
        </div>

        <!-- CODE HANDOFFS -->
        <div class="slide">
            <h2>ğŸ”„ Code Handoffs & Function Calls</h2>
            <p style="font-size: 1.3em; margin-bottom: 30px;">Complete breakdown of every function call and why it was called</p>
            
            <h3>ğŸ“‹ File Interaction Map</h3>
            <div style="background: #1e1e1e; color: #d4d4d4; padding: 30px; border-radius: 12px; font-family: 'Courier New', monospace; line-height: 2;">
<span style="color: #4ec9b0;">OneMindAI.tsx</span> â†’ <span style="color: #ce9178;">file-utils.ts</span>, <span style="color: #ce9178;">EnhancedMarkdownRenderer.tsx</span>
    â†’ <span style="color: #ce9178;">ChartRenderer.tsx</span>, <span style="color: #ce9178;">marked.parse()</span>
    â†’ Provider SDKs (OpenAI, Claude, Gemini)
            </div>
        </div>

        <div class="slide">
            <h2>Step 1: User Clicks "Run Live"</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">1</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Function: runAll()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> OneMindAI.tsx | <strong>Line:</strong> 819</p>
            </div>

            <div class="code-block">
<span class="keyword">async function</span> <span class="function">runAll</span>() {
    <span class="keyword">if</span> (<span class="variable">selectedEngines</span>.<span class="variable">length</span> === <span class="number">0</span> || !<span class="variable">prompt</span>.<span class="function">trim</span>()) <span class="keyword">return</span>;
    <span class="function">setIsRunning</span>(<span class="keyword">true</span>);
    <span class="function">setResults</span>([]);
    <span class="function">setStreamingStates</span>({});
}
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS FUNCTION WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; line-height: 1.8; color: #333;">
                    User clicked the "Run Live" button. This is the <strong>entry point</strong> that:
                </p>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><strong>Validates</strong> - Ensures engines are selected and prompt is not empty</li>
                    <li><strong>Initializes</strong> - Sets UI to loading state</li>
                    <li><strong>Clears</strong> - Removes previous results</li>
                    <li><strong>Prepares</strong> - Sets up streaming states for each engine</li>
                </ul>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Triggered immediately when user clicks the "Run Live" button in the UI
                </p>
            </div>

            <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">ğŸ“¦ DATA PASSED:</strong>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><code>selectedEngines</code> - Array of selected AI models</li>
                    <li><code>prompt</code> - User's input text from prompt box</li>
                    <li><code>uploadedFiles</code> - Any attached files (TXT, Word, JSON, images)</li>
                </ul>
            </div>
        </div>

        <div class="slide">
            <h2>Step 2: Parallel Engine Processing</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">2</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Function: selectedEngines.map()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> OneMindAI.tsx | <strong>Line:</strong> 830</p>
            </div>

            <div class="code-block">
<span class="keyword">const</span> <span class="variable">runs</span> = <span class="variable">selectedEngines</span>.<span class="function">map</span>(<span class="keyword">async</span> (<span class="variable">e</span>) => {
    <span class="keyword">const</span> { <span class="variable">nowIn</span>, <span class="variable">outCap</span> } = <span class="function">computePreview</span>(<span class="variable">e</span>, <span class="variable">prompt</span>);
    <span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="function">streamFromProvider</span>(<span class="variable">e</span>, <span class="variable">prompt</span>, <span class="variable">outCap</span>)) {
        <span class="variable">fullContent</span> += <span class="variable">chunk</span>;
    }
});
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS FUNCTION WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Called by <code>runAll()</code> to process multiple AI engines simultaneously. <strong>Parallel execution</strong> means:
                </p>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><strong>Faster results</strong> - All engines run at once, not sequentially</li>
                    <li><strong>Independent streams</strong> - One slow API doesn't block others</li>
                    <li><strong>Better UX</strong> - User sees responses as they arrive</li>
                </ul>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Immediately after <code>runAll()</code> validates input and initializes state
                </p>
            </div>
        </div>

        <div class="slide">
            <h2>Step 3: Compute Tokens & Cost</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">3</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Function: computePreview()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> OneMindAI.tsx | <strong>Line:</strong> 831</p>
            </div>

            <div class="code-block">
<span class="keyword">function</span> <span class="function">computePreview</span>(<span class="variable">e</span>: <span class="variable">Engine</span>, <span class="variable">prompt</span>: <span class="keyword">string</span>) {
    <span class="keyword">const</span> <span class="variable">nowIn</span> = <span class="function">estimateTokens</span>(<span class="variable">prompt</span>, <span class="variable">e</span>.<span class="variable">tokenizer</span>);
    <span class="keyword">const</span> <span class="variable">outCap</span> = <span class="function">getOutCap</span>(<span class="variable">e</span>);
    <span class="keyword">const</span> <span class="variable">pricing</span> = <span class="function">getPrice</span>(<span class="variable">e</span>);
    <span class="keyword">return</span> { <span class="variable">nowIn</span>, <span class="variable">outCap</span>, <span class="variable">minSpend</span>, <span class="variable">maxSpend</span> };
}
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS FUNCTION WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Calculate cost <strong>BEFORE</strong> making API call to:
                </p>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><strong>Budget management</strong> - Prevent unexpected costs</li>
                    <li><strong>User transparency</strong> - Show estimated spending</li>
                    <li><strong>Token limits</strong> - Respect model context windows</li>
                    <li><strong>Cost tracking</strong> - Accumulate total spending</li>
                </ul>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Called for each engine before <code>streamFromProvider()</code> to calculate token usage
                </p>
            </div>

            <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">ğŸ“¦ RETURNS:</strong>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><code>nowIn</code> - Input tokens (from prompt)</li>
                    <li><code>outCap</code> - Max output tokens allowed</li>
                    <li><code>minSpend</code> - Minimum cost (input only)</li>
                    <li><code>maxSpend</code> - Maximum cost (input + full output)</li>
                </ul>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ”„ HANDOFF #1: Main â†’ Streaming</h2>
            <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 40px; border-radius: 15px; border: 4px solid #e91e63; margin: 20px 0;">
                <h3 style="color: white; font-size: 2em; margin-bottom: 20px;">runAll() â†’ streamFromProvider()</h3>
                <div style="font-size: 1.2em; line-height: 2;">
                    <p><strong>FROM:</strong> runAll() in OneMindAI.tsx Line 840</p>
                    <p><strong>TO:</strong> streamFromProvider() in OneMindAI.tsx Line 299</p>
                    <p style="margin-top: 20px;"><strong>ğŸ“¦ DATA TRANSFERRED:</strong></p>
                    <ul style="margin-left: 30px; margin-top: 15px;">
                        <li><code>e: Engine</code> - Model config (API key, provider, version)</li>
                        <li><code>prompt: string</code> - User's input text</li>
                        <li><code>outCap: number</code> - Max output tokens</li>
                    </ul>
                    <p style="margin-top: 20px;"><strong>ğŸ¤” WHY:</strong> Initiate streaming from AI provider</p>
                    <p style="margin-top: 10px;"><strong>â° WHEN:</strong> After token calculation completes</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 4: Stream from Provider</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">4</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Function: streamFromProvider()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> OneMindAI.tsx | <strong>Line:</strong> 299</p>
            </div>

            <div class="code-block">
<span class="keyword">async function*</span> <span class="function">streamFromProvider</span>(<span class="variable">e</span>: <span class="variable">Engine</span>, <span class="variable">prompt</span>: <span class="keyword">string</span>, <span class="variable">outCap</span>: <span class="keyword">number</span>) {
    <span class="keyword">let</span> <span class="variable">enhancedPrompt</span> = <span class="variable">prompt</span>;
    
    <span class="comment">// Add uploaded file content</span>
    <span class="keyword">const</span> <span class="variable">textFiles</span> = <span class="variable">uploadedFiles</span>.<span class="function">filter</span>(<span class="variable">f</span> => <span class="variable">f</span>.<span class="variable">name</span>.<span class="function">endsWith</span>(<span class="string">'.txt'</span>));
    <span class="keyword">if</span> (<span class="variable">textFiles</span>.<span class="variable">length</span> > <span class="number">0</span>) {
        <span class="variable">enhancedPrompt</span> += <span class="string">'\n\n--- Uploaded Text Files ---\n'</span>;
    }
    
    <span class="comment">// Make provider-specific API call</span>
    <span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">provider</span> === <span class="string">'openai'</span>) {
        <span class="keyword">const</span> <span class="variable">stream</span> = <span class="keyword">await</span> <span class="variable">client</span>.<span class="variable">chat</span>.<span class="variable">completions</span>.<span class="function">create</span>({ <span class="variable">stream</span>: <span class="keyword">true</span> });
        <span class="keyword">for await</span> (<span class="keyword">const</span> <span class="variable">chunk</span> <span class="keyword">of</span> <span class="variable">stream</span>) {
            <span class="keyword">yield</span> <span class="variable">chunk</span>.<span class="variable">choices</span>[<span class="number">0</span>]?.<span class="variable">delta</span>?.<span class="variable">content</span>;
        }
    }
}
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS FUNCTION WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    AsyncGenerator that yields chunks in real-time:
                </p>
                <ul style="margin-left: 25px; margin-top: 15px; color: #333; line-height: 1.8;">
                    <li><strong>Enhance prompt</strong> - Add file content for AI analysis</li>
                    <li><strong>Route providers</strong> - Handle different APIs (OpenAI, Claude, Gemini)</li>
                    <li><strong>Stream chunks</strong> - Yield as they arrive, not after completion</li>
                    <li><strong>Error handling</strong> - Catch and report API errors</li>
                </ul>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Called by <code>selectedEngines.map()</code> for each selected engine after token calculation
                </p>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ”„ HANDOFF #2: File Processing</h2>
            <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 40px; border-radius: 15px; border: 4px solid #e91e63; margin: 20px 0;">
                <h3 style="color: white; font-size: 2em; margin-bottom: 20px;">User Upload â†’ processFiles()</h3>
                <div style="font-size: 1.2em; line-height: 2;">
                    <p><strong>FROM:</strong> User drag-and-drop â†’ FileUploadZone component</p>
                    <p><strong>TO:</strong> processFiles() in file-utils.ts Line 26</p>
                    <p style="margin-top: 20px;"><strong>ğŸ“¦ DATA:</strong> <code>fileList: File[]</code></p>
                    <p style="margin-top: 15px;"><strong>ğŸ¤” WHY:</strong> Extract text from files for AI analysis</p>
                    <p style="margin-top: 10px;"><strong>â° WHEN:</strong> Immediately when user drops/selects files</p>
                </div>
            </div>

            <div class="code-block">
<span class="keyword">export async function</span> <span class="function">processFiles</span>(<span class="variable">fileList</span>: <span class="variable">File</span>[]): <span class="variable">Promise</span>&lt;<span class="variable">UploadedFile</span>[]&gt; {
    <span class="keyword">return</span> <span class="variable">Promise</span>.<span class="function">all</span>(<span class="variable">fileList</span>.<span class="function">map</span>(<span class="keyword">async</span> (<span class="variable">file</span>) => {
        <span class="keyword">if</span> (<span class="variable">file</span>.<span class="variable">name</span>.<span class="function">endsWith</span>(<span class="string">'.txt'</span>)) {
            <span class="variable">extractedText</span> = <span class="keyword">await</span> <span class="variable">file</span>.<span class="function">text</span>();
        } <span class="keyword">else if</span> (<span class="variable">file</span>.<span class="variable">name</span>.<span class="function">endsWith</span>(<span class="string">'.docx'</span>)) {
            <span class="variable">extractedText</span> = <span class="keyword">await</span> <span class="variable">mammoth</span>.<span class="function">extractRawText</span>(...);
        }
        <span class="keyword">return</span> { <span class="variable">name</span>, <span class="variable">extractedText</span> };
    }));
}
            </div>
        </div>

        <div class="slide">
            <h2>Step 5: Update React State</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">5</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Function: updateStreamingContent()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> OneMindAI.tsx | <strong>Line:</strong> 277</p>
            </div>

            <div style="background: #f0f4ff; padding: 25px; border-radius: 10px; margin: 20px 0; border-left: 6px solid #667eea;">
                <p style="font-size: 1.1em; color: #333;"><strong>Still NO formatting!</strong></p>
            </div>

            <div class="code-block">
<span class="keyword">function</span> <span class="function">updateStreamingContent</span>(<span class="variable">engineId</span>: <span class="keyword">string</span>, <span class="variable">content</span>: <span class="keyword">string</span>, <span class="variable">isStreaming</span>: <span class="keyword">boolean</span>) {
    <span class="function">setStreamingStates</span>(<span class="variable">prev</span> => ({
        ...<span class="variable">prev</span>,
        [<span class="variable">engineId</span>]: { <span class="variable">content</span>, <span class="variable">isStreaming</span> }
    }));
}

<span class="comment">// State structure:</span>
<span class="variable">streamingStates</span>[<span class="string">"openai"</span>] = {
    <span class="variable">content</span>: <span class="string">"Here's a comparison:\n\n| Feature | React |..."</span>,  <span class="comment">// â† RAW MARKDOWN</span>
    <span class="variable">isStreaming</span>: <span class="keyword">false</span>
}
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS FUNCTION WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Update React state to trigger re-render and show chunks in real-time
                </p>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Called every time a new chunk arrives from <code>streamFromProvider()</code>
                </p>
            </div>
        </div>

        <div class="slide">
            <h2>Step 6: EnhancedMarkdownRenderer</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">6</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Component: EnhancedMarkdownRenderer</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> EnhancedMarkdownRenderer.tsx | <strong>Line:</strong> 19</p>
            </div>

            <div class="code-block">
<span class="keyword">export default function</span> <span class="function">EnhancedMarkdownRenderer</span>({ <span class="variable">content</span> }) {
    <span class="comment">// content = raw markdown string from state</span>
    <span class="comment">// Still no formatting!</span>
}
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS COMPONENT WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    React automatically renders this component when state changes to display the AI response
                </p>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Every time <code>streamingStates</code> updates (on each new chunk)
                </p>
            </div>
        </div>

        <div class="slide">
            <h2>Step 7: ğŸ“š LIBRARIES START PROCESSING!</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; position: relative; margin: 20px 0;">
                <div style="position: absolute; top: -20px; left: 30px; background: #f39c12; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; font-weight: bold; box-shadow: 0 6px 20px rgba(0,0,0,0.3);">7</div>
                <h3 style="color: white; margin-top: 20px;">ğŸ¯ Library: marked.parse()</h3>
                <p style="margin: 10px 0;"><strong>File:</strong> EnhancedMarkdownRenderer.tsx | <strong>Line:</strong> 126</p>
            </div>

            <div class="code-block">
<span class="keyword">const</span> <span class="variable">html</span> = <span class="variable">marked</span>.<span class="function">parse</span>(<span class="variable">processedText</span>);
            </div>

            <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <strong style="font-size: 1.3em;">ğŸ¤” WHY THIS LIBRARY WAS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Convert markdown syntax to HTML so browser can render formatted content (tables, bold, lists, etc.)
                </p>
            </div>

            <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">â° WHEN THIS IS CALLED:</strong>
                <p style="margin-top: 15px; font-size: 1.1em; color: #333;">
                    Inside <code>useEffect</code> whenever <code>content</code> prop changes
                </p>
            </div>

            <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 25px; border-radius: 10px;">
                <strong style="font-size: 1.3em;">ğŸ“¦ TRANSFORMATION:</strong>
                <p style="margin-top: 15px; color: #333;"><strong>Input:</strong> <code>| Feature | React |</code></p>
                <p style="margin-top: 10px; color: #333;"><strong>Output:</strong> <code>&lt;table&gt;&lt;tr&gt;&lt;td&gt;Feature&lt;/td&gt;...</code></p>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ“Š Complete Handoff Summary</h2>
            <table class="comparison-table">
                <thead>
                    <tr><th>#</th><th>From</th><th>To</th><th>Why</th></tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>User Click</td><td>runAll()</td><td>Start processing</td></tr>
                    <tr><td>2</td><td>runAll()</td><td>streamFromProvider()</td><td>Get AI response</td></tr>
                    <tr><td>3</td><td>User Drop</td><td>processFiles()</td><td>Extract file content</td></tr>
                    <tr><td>4</td><td>streamFromProvider()</td><td>Provider SDK</td><td>Make API call</td></tr>
                    <tr><td>5</td><td>Provider SDK</td><td>yield chunks</td><td>Stream response</td></tr>
                    <tr><td>6</td><td>chunks</td><td>updateStreamingContent()</td><td>Update state</td></tr>
                    <tr><td>7</td><td>State</td><td>React Render</td><td>Re-render UI</td></tr>
                    <tr><td>8</td><td>Render</td><td>EnhancedMarkdownRenderer</td><td>Display content</td></tr>
                    <tr><td>9</td><td>Renderer</td><td>marked.parse()</td><td>Convert to HTML</td></tr>
                    <tr><td>10</td><td>Renderer</td><td>ChartRenderer</td><td>Render charts</td></tr>
                </tbody>
            </table>
        </div>

        <!-- REAL EXAMPLE WITH MOCK DATA -->
        <div class="slide">
            <h2>ğŸ¯ Real Example: Complete Flow with Mock Data</h2>
            <p style="font-size: 1.3em; margin-bottom: 30px;">Let's trace a real prompt through the entire system with actual input/output</p>
            
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin: 20px 0;">
                <h3 style="color: white; font-size: 1.8em; margin-bottom: 15px;">ğŸ“ USER INPUT</h3>
                <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; font-size: 1.1em;">
                    <p><strong>Prompt:</strong> "Analyze sales data and create a pie chart showing revenue by product category"</p>
                    <p style="margin-top: 15px;"><strong>Attached File:</strong> sales_data.json (5.2 KB)</p>
                    <p style="margin-top: 15px;"><strong>Selected Engine:</strong> OpenAI GPT-4.1</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 1: Input Processing</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸ” File Processing</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>handleFileUpload(event)</code> (Line 1700-1750)</p>
                    <p><strong>â° When Called:</strong> User selects/drops file in upload area</p>
                    <p><strong>â“ Why Called:</strong> Processes uploaded files and extracts text content</p>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="comment">// sales_data.json content:</span>
{
    <span class="string">"products"</span>: [
        { <span class="string">"category"</span>: <span class="string">"Electronics"</span>, <span class="string">"revenue"</span>: <span class="number">45000</span> },
        { <span class="string">"category"</span>: <span class="string">"Clothing"</span>, <span class="string">"revenue"</span>: <span class="number">32000</span> },
        { <span class="string">"category"</span>: <span class="string">"Food"</span>, <span class="string">"revenue"</span>: <span class="number">28000</span> },
        { <span class="string">"category"</span>: <span class="string">"Books"</span>, <span class="string">"revenue"</span>: <span class="number">15000</span> }
    ]
}
                </div>

                <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong style="font-size: 1.2em;">ğŸ“¦ Processing Steps:</strong>
                    <ul style="margin-left: 25px; margin-top: 15px; line-height: 1.8;">
                        <li><strong>Step 1.1:</strong> <code>FileReader.readAsText()</code> reads file content</li>
                        <li><strong>Step 1.2:</strong> <code>JSON.parse()</code> parses JSON structure</li>
                        <li><strong>Step 1.3:</strong> <code>JSON.stringify(data, null, 2)</code> formats with indentation</li>
                        <li><strong>Step 1.4:</strong> Stored in <code>uploadedFiles</code> state array</li>
                        <li><strong>Step 1.5:</strong> File size: 5.2 KB â†’ ~1,300 tokens (estimated)</li>
                    </ul>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px;">
                    <p><strong>ğŸ“¤ Output:</strong></p>
                    <div class="code-block" style="margin-top: 10px; font-size: 0.9em;">
<span class="variable">uploadedFiles</span> = [{
    <span class="variable">name</span>: <span class="string">"sales_data.json"</span>,
    <span class="variable">type</span>: <span class="string">"application/json"</span>,
    <span class="variable">size</span>: <span class="number">5324</span>,
    <span class="variable">extractedText</span>: <span class="string">"{\n  \"products\": [...]\n}"</span>
}];
                    </div>
                    <p style="margin-top: 15px;"><strong>â¡ï¸ Next Trigger:</strong> User clicks "Run Live" â†’ calls <code>runAll()</code></p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 2: Enhanced Prompt Creation</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸ”§ Prompt Enhancement</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>streamFromProvider(e, prompt, outCap)</code> (Line 299-357)</p>
                    <p><strong>â° When Called:</strong> Immediately after <code>runAll()</code> validates inputs</p>
                    <p><strong>â“ Why Called:</strong> Combines user prompt with uploaded file content before API call</p>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="comment">// Enhanced prompt sent to OpenAI:</span>
<span class="keyword">let</span> <span class="variable">enhancedPrompt</span> = <span class="string">`Analyze sales data and create a pie chart showing revenue by product category

--- Uploaded JSON Files ---

ğŸ“„ sales_data.json:
JSON Content:
\`\`\`json
{
  "products": [
    { "category": "Electronics", "revenue": 45000 },
    { "category": "Clothing", "revenue": 32000 },
    { "category": "Food", "revenue": 28000 },
    { "category": "Books", "revenue": 15000 }
  ]
}
\`\`\`
`</span>;
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px;">
                    <p><strong>ğŸ“¤ Output:</strong> Enhanced prompt string with file content embedded</p>
                    <p style="margin-top: 10px;"><strong>ğŸ“Š Token Calculation:</strong></p>
                    <ul style="margin-left: 25px; margin-top: 10px; line-height: 1.8;">
                        <li>Original prompt: ~20 tokens</li>
                        <li>JSON file content: ~1,300 tokens</li>
                        <li><strong>Total input: ~1,320 tokens</strong></li>
                        <li>Estimated cost: $0.0013 (input) + $0.0060 (output) = <strong>$0.0073</strong></li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>â¡ï¸ Next Trigger:</strong> Calls OpenAI SDK <code>client.chat.completions.create()</code></p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 3: OpenAI API Call</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸŒ OpenAI SDK Request</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>client.chat.completions.create()</code> (Lines 441-500)</p>
                    <p><strong>â° When Called:</strong> Inside <code>streamFromProvider()</code> after prompt enhancement</p>
                    <p><strong>â“ Why Called:</strong> Sends enhanced prompt to OpenAI and initiates streaming response</p>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="keyword">const</span> <span class="variable">OpenAI</span> = (<span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">'openai'</span>)).<span class="variable">default</span>;
<span class="keyword">const</span> <span class="variable">client</span> = <span class="keyword">new</span> <span class="function">OpenAI</span>({ <span class="variable">apiKey</span>: <span class="variable">e</span>.<span class="variable">apiKey</span> });

<span class="keyword">const</span> <span class="variable">stream</span> = <span class="keyword">await</span> <span class="variable">client</span>.<span class="variable">chat</span>.<span class="variable">completions</span>.<span class="function">create</span>({
    <span class="variable">model</span>: <span class="string">"gpt-4.1"</span>,
    <span class="variable">messages</span>: [{ <span class="variable">role</span>: <span class="string">'user'</span>, <span class="variable">content</span>: <span class="variable">enhancedPrompt</span> }],
    <span class="variable">max_tokens</span>: <span class="number">4000</span>,
    <span class="variable">temperature</span>: <span class="number">0.7</span>,
    <span class="variable">stream</span>: <span class="keyword">true</span>  <span class="comment">// â† Enable streaming!</span>
});
                </div>

                <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 20px; border-radius: 10px;">
                    <strong style="font-size: 1.2em;">ğŸ“¡ Request Details:</strong>
                    <ul style="margin-left: 25px; margin-top: 15px; line-height: 1.8;">
                        <li><strong>Endpoint:</strong> https://api.openai.com/v1/chat/completions</li>
                        <li><strong>Method:</strong> POST</li>
                        <li><strong>Headers:</strong> Authorization: Bearer sk-...</li>
                        <li><strong>Streaming:</strong> Enabled (SSE - Server-Sent Events)</li>
                    </ul>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <p><strong>ğŸ“¤ Output:</strong> AsyncIterable stream object</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> OpenAI server starts sending JSON chunks via SSE</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 4: Raw Streaming Response</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸ“¦ Raw Chunks from OpenAI</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>for await (const chunk of stream)</code> (Lines 478-483)</p>
                    <p><strong>â° When Called:</strong> As each JSON chunk arrives from OpenAI server</p>
                    <p><strong>â“ Why Called:</strong> Extracts text content from JSON, discards metadata</p>
                </div>

                <div style="background: #ffebee; border-left: 6px solid #e91e63; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong style="font-size: 1.2em; color: #c2185b;">âš ï¸ NO FORMATTING YET - Pure Text Chunks!</strong>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="comment">// Chunk 1:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">"Based"</span> }}]}

<span class="comment">// Chunk 2:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" on"</span> }}]}

<span class="comment">// Chunk 3:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" the"</span> }}]}

<span class="comment">// Chunk 4:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" sales"</span> }}]}

<span class="comment">// ... continues streaming ...</span>

<span class="comment">// Chunk 47:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">"\n\n##"</span> }}]}

<span class="comment">// Chunk 48:</span>
{ <span class="string">"choices"</span>: [{ <span class="string">"delta"</span>: { <span class="string">"content"</span>: <span class="string">" Revenue"</span> }}]}
                </div>

                <div style="background: #fff3cd; border-left: 6px solid #ffc107; padding: 20px; border-radius: 10px;">
                    <strong style="font-size: 1.2em;">ğŸ”„ Chunk Processing:</strong>
                    <ul style="margin-left: 25px; margin-top: 15px; line-height: 1.8;">
                        <li>Each chunk arrives ~50-100ms apart</li>
                        <li><code>yield chunk.choices[0].delta.content</code> extracts text</li>
                        <li>Accumulated in <code>fullContent</code> variable</li>
                        <li>Total chunks: ~150 for complete response</li>
                    </ul>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <p><strong>ğŸ“¤ Output:</strong> Individual text strings: <code>"Based"</code>, <code>" on"</code>, <code>" the"</code>, <code>" sales"</code>...</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> Each yielded chunk goes to accumulation loop in <code>runAll()</code></p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 5: Accumulated Response (RAW)</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸ“ Complete Raw Markdown Response</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/OneMindAI.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> String concatenation in <code>runAll()</code> (Lines 840-843)</p>
                    <p><strong>â° When Called:</strong> For every chunk yielded by <code>streamFromProvider()</code></p>
                    <p><strong>â“ Why Called:</strong> Builds complete response by joining all chunks</p>
                </div>

                <div style="background: #f0f4ff; padding: 25px; border-radius: 10px; margin: 20px 0; border-left: 6px solid #667eea;">
                    <p style="font-size: 1.1em;"><strong>âœ… This is PURE MARKDOWN - No HTML yet!</strong></p>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="variable">fullContent</span> = <span class="string">`Based on the sales data provided, here's the analysis:

## Revenue by Product Category

| Category    | Revenue  | Percentage |
|-------------|----------|------------|
| Electronics | $45,000  | 37.5%      |
| Clothing    | $32,000  | 26.7%      |
| Food        | $28,000  | 23.3%      |
| Books       | $15,000  | 12.5%      |

**Total Revenue:** $120,000

### Pie Chart Code

\`\`\`python
import matplotlib.pyplot as plt

categories = ['Electronics', 'Clothing', 'Food', 'Books']
revenues = [45000, 32000, 28000, 15000]
colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A']

plt.figure(figsize=(10, 8))
plt.pie(revenues, labels=categories, autopct='%1.1f%%', colors=colors)
plt.title('Revenue by Product Category')
plt.axis('equal')
plt.show()
\`\`\`

### Key Insights

- **Electronics** dominates with 37.5% of total revenue
- **Clothing** and **Food** are close competitors
- **Books** represents the smallest segment at 12.5%
`</span>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <p><strong>ğŸ“¤ Output:</strong> Complete markdown string stored in <code>fullContent</code> variable</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> Calls <code>setStreamingStates()</code> to update React state</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 6: Library Processing Begins</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <h3 style="color: #667eea;">ğŸ“š EnhancedMarkdownRenderer Processing</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>useEffect(() => {...}, [content])</code> (Lines 58-167)</p>
                    <p><strong>â° When Called:</strong> When <code>content</code> prop changes (React re-render)</p>
                    <p><strong>â“ Why Called:</strong> Processes raw markdown through multiple libraries</p>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                    <h4 style="color: white; font-size: 1.5em;">ğŸ”§ Library 1: Code Block Extraction</h4>
                    <p style="margin-top: 10px; opacity: 0.9;"><strong>ğŸ”§ Function:</strong> <code>RegExp.exec()</code> with pattern (Line 81-103)</p>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="keyword">const</span> <span class="variable">codeBlockRegex</span> = <span class="string">/```([^\n]*)\n([\s\S]*?)```/g</span>;
<span class="keyword">let</span> <span class="variable">match</span>;
<span class="keyword">while</span> ((<span class="variable">match</span> = <span class="variable">codeBlockRegex</span>.<span class="function">exec</span>(<span class="variable">content</span>)) !== <span class="keyword">null</span>) {
    <span class="keyword">const</span> <span class="variable">language</span> = <span class="variable">match</span>[<span class="number">1</span>].<span class="function">trim</span>();  <span class="comment">// "python"</span>
    <span class="keyword">const</span> <span class="variable">code</span> = <span class="variable">match</span>[<span class="number">2</span>].<span class="function">trim</span>();      <span class="comment">// matplotlib code</span>
    <span class="variable">extractedCodeBlocks</span>.<span class="function">push</span>({ <span class="variable">code</span>, <span class="variable">language</span>, <span class="variable">id</span> });
}
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px;">
                    <p><strong>ğŸ“¤ Output:</strong> Array of code blocks</p>
                    <ul style="margin-left: 25px; margin-top: 10px; line-height: 1.8;">
                        <li><strong>Language:</strong> python</li>
                        <li><strong>Code:</strong> matplotlib pie chart (15 lines)</li>
                        <li><strong>Purpose:</strong> Separate rendering for charts</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>â¡ï¸ Next Trigger:</strong> Proceeds to markdown parsing with <code>marked.parse()</code></p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 7: Markdown â†’ HTML Conversion</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>marked.parse(processedText)</code> (Line 135)</p>
                    <p><strong>â° When Called:</strong> After code block extraction completes</p>
                    <p><strong>â“ Why Called:</strong> Converts Markdown syntax to HTML for browser rendering</p>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                    <h4 style="color: white; font-size: 1.5em;">ğŸ”§ Library 2: marked.parse()</h4>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="keyword">const</span> <span class="variable">html</span> = <span class="variable">marked</span>.<span class="function">parse</span>(<span class="variable">processedText</span>);
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: #fff3cd; padding: 20px; border-radius: 10px; border-left: 6px solid #ffc107;">
                        <strong style="font-size: 1.2em;">ğŸ“ INPUT (Markdown):</strong>
                        <pre style="margin-top: 15px; font-size: 0.9em;">| Category | Revenue |
|----------|---------|
| Electronics | $45,000 |

**Total Revenue:** $120,000</pre>
                    </div>
                    <div style="background: #d4edda; padding: 20px; border-radius: 10px; border-left: 6px solid #28a745;">
                        <strong style="font-size: 1.2em;">ğŸ“¦ OUTPUT (HTML):</strong>
                        <pre style="margin-top: 15px; font-size: 0.9em;">&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Category&lt;/th&gt;
      &lt;th&gt;Revenue&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Electronics&lt;/td&gt;
      &lt;td&gt;$45,000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;strong&gt;Total Revenue:&lt;/strong&gt; $120,000</pre>
                    </div>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <p><strong>ğŸ“¤ Output:</strong> HTML string with proper table tags, headings, and formatting</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> Calls <code>setProcessedContent(html)</code> to update state, then renders charts</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 8: Chart Rendering</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #667eea;">
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/components/ChartCodeRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> <code>convertMatplotlibToPlotly(pythonCode)</code> (Line 45-120)</p>
                    <p><strong>â° When Called:</strong> When rendering extracted Python code blocks</p>
                    <p><strong>â“ Why Called:</strong> Converts Python matplotlib code to interactive Plotly charts</p>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                    <h4 style="color: white; font-size: 1.5em;">ğŸ”§ Library 3: ChartRenderer + Plotly</h4>
                </div>

                <div class="code-block" style="margin: 20px 0;">
<span class="comment">// ChartRenderer.tsx converts Python matplotlib to Plotly</span>
<span class="keyword">function</span> <span class="function">convertMatplotlibToPlotly</span>(<span class="variable">pythonCode</span>: <span class="keyword">string</span>) {
    <span class="comment">// Extract data from Python code</span>
    <span class="keyword">const</span> <span class="variable">categories</span> = [<span class="string">'Electronics'</span>, <span class="string">'Clothing'</span>, <span class="string">'Food'</span>, <span class="string">'Books'</span>];
    <span class="keyword">const</span> <span class="variable">revenues</span> = [<span class="number">45000</span>, <span class="number">32000</span>, <span class="number">28000</span>, <span class="number">15000</span>];
    
    <span class="keyword">return</span> {
        <span class="variable">data</span>: [{
            <span class="variable">type</span>: <span class="string">'pie'</span>,
            <span class="variable">labels</span>: <span class="variable">categories</span>,
            <span class="variable">values</span>: <span class="variable">revenues</span>,
            <span class="variable">marker</span>: { <span class="variable">colors</span>: [<span class="string">'#FF6B6B'</span>, <span class="string">'#4ECDC4'</span>, <span class="string">'#45B7D1'</span>, <span class="string">'#FFA07A'</span>] }
        }],
        <span class="variable">layout</span>: { <span class="variable">title</span>: <span class="string">'Revenue by Product Category'</span> }
    };
}
                </div>

                <div style="background: #e3f2fd; border-left: 6px solid #2196f3; padding: 20px; border-radius: 10px;">
                    <strong style="font-size: 1.2em;">ğŸ“Š Plotly Rendering:</strong>
                    <ul style="margin-left: 25px; margin-top: 15px; line-height: 1.8;">
                        <li>Python code parsed and converted to Plotly format</li>
                        <li><code>&lt;Plot data={...} layout={...} /&gt;</code> component rendered</li>
                        <li>Interactive chart with hover effects</li>
                        <li>Responsive and mobile-friendly</li>
                    </ul>
                </div>

                <div style="background: #d4edda; border-left: 6px solid #28a745; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <p><strong>ğŸ“¤ Output:</strong> Plotly React component with interactive pie chart</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> React renders chart alongside HTML content</p>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>Step 9: Final Output - What User Sees</h2>
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #28a745;">
                <h3 style="color: #28a745;">âœ… Rendered Output on Screen</h3>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p><strong>ğŸ“ File:</strong> <code>src/components/EnhancedMarkdownRenderer.tsx</code></p>
                    <p><strong>ğŸ”§ Function:</strong> JSX render with <code>dangerouslySetInnerHTML</code> (Line 263)</p>
                    <p><strong>â° When Called:</strong> After all processing completes and state updates</p>
                    <p><strong>â“ Why Called:</strong> Injects processed HTML into DOM for user to see</p>
                    <p style="margin-top: 10px;"><strong>ğŸ“¤ Output:</strong> Fully formatted, interactive content visible in browser</p>
                    <p style="margin-top: 10px;"><strong>â¡ï¸ Next Trigger:</strong> User sees the complete response! Process complete.</p>
                </div>

                <div style="background: white; padding: 30px; border-radius: 10px; margin: 20px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <h4 style="color: #333;">Based on the sales data provided, here's the analysis:</h4>
                    
                    <h3 style="color: #667eea; margin-top: 30px;">Revenue by Product Category</h3>
                    
                    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                <th style="padding: 15px; text-align: left;">Category</th>
                                <th style="padding: 15px; text-align: left;">Revenue</th>
                                <th style="padding: 15px; text-align: left;">Percentage</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: #f8f9fa;">
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">Electronics</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">$45,000</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">37.5%</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">Clothing</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">$32,000</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">26.7%</td>
                            </tr>
                            <tr style="background: #f8f9fa;">
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">Food</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">$28,000</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">23.3%</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">Books</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">$15,000</td>
                                <td style="padding: 12px; border-bottom: 1px solid #ddd;">12.5%</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p style="font-size: 1.2em; margin: 20px 0;"><strong>Total Revenue:</strong> $120,000</p>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin: 30px 0; text-align: center;">
                        <h4 style="color: white; font-size: 1.5em; margin-bottom: 20px;">ğŸ“Š Interactive Pie Chart</h4>
                        <div style="background: rgba(255,255,255,0.1); padding: 40px; border-radius: 10px;">
                            <svg width="300" height="300" viewBox="0 0 300 300">
                                <circle cx="150" cy="150" r="100" fill="#FF6B6B" stroke="white" stroke-width="2" transform="rotate(-90 150 150)"/>
                                <path d="M 150 150 L 150 50 A 100 100 0 0 1 235.4 114.6 Z" fill="#4ECDC4" stroke="white" stroke-width="2"/>
                                <path d="M 150 150 L 235.4 114.6 A 100 100 0 0 1 185.4 235.4 Z" fill="#45B7D1" stroke="white" stroke-width="2"/>
                                <path d="M 150 150 L 185.4 235.4 A 100 100 0 0 1 64.6 185.4 Z" fill="#FFA07A" stroke="white" stroke-width="2"/>
                                <text x="150" y="80" text-anchor="middle" fill="white" font-size="14">Electronics 37.5%</text>
                                <text x="220" y="130" text-anchor="middle" fill="white" font-size="14">Clothing 26.7%</text>
                                <text x="200" y="220" text-anchor="middle" fill="white" font-size="14">Food 23.3%</text>
                                <text x="90" y="200" text-anchor="middle" fill="white" font-size="14">Books 12.5%</text>
                            </svg>
                        </div>
                        <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.9;">Rendered by react-plotly.js (Interactive)</p>
                    </div>
                    
                    <h4 style="color: #667eea; margin-top: 30px;">Key Insights</h4>
                    <ul style="line-height: 2; margin-left: 25px;">
                        <li><strong>Electronics</strong> dominates with 37.5% of total revenue</li>
                        <li><strong>Clothing</strong> and <strong>Food</strong> are close competitors</li>
                        <li><strong>Books</strong> represents the smallest segment at 12.5%</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="slide">
            <h2>ğŸ¯ Complete Flow Summary</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px;">
                <h3 style="color: white; font-size: 2em; margin-bottom: 30px;">From Input to Output</h3>
                <div style="font-size: 1.1em; line-height: 2.5;">
                    <p>ğŸ“ <strong>User Input:</strong> Prompt + sales_data.json</p>
                    <p>â†“</p>
                    <p>ğŸ”§ <strong>processFiles():</strong> Extract JSON data</p>
                    <p>â†“</p>
                    <p>ğŸ“¦ <strong>streamFromProvider():</strong> Enhance prompt with file content</p>
                    <p>â†“</p>
                    <p>ğŸŒ <strong>OpenAI API:</strong> Stream 150 chunks (~2 seconds)</p>
                    <p>â†“</p>
                    <p>ğŸ“ <strong>Accumulated:</strong> Raw markdown (tables + Python code)</p>
                    <p>â†“</p>
                    <p>ğŸ“š <strong>marked.parse():</strong> Markdown â†’ HTML tables</p>
                    <p>â†“</p>
                    <p>ğŸ“Š <strong>ChartRenderer:</strong> Python â†’ Plotly pie chart</p>
                    <p>â†“</p>
                    <p>âœ… <strong>User Sees:</strong> Formatted table + Interactive chart</p>
                </div>
            </div>
        </div>

        <div class="slide" style="text-align: center;">
            <h1 style="font-size: 4em; margin-bottom: 30px;">ğŸ‰</h1>
            <h2 style="border: none;">Thank You!</h2>
            <p style="font-size: 1.5em; color: #666; margin-top: 30px;">OneMindAI Architecture Deep Dive</p>
            <p style="font-size: 1.2em; color: #999; margin-top: 20px;">Formula2GX Digital Advanced Incubation Labs Platform</p>
            <div style="margin-top: 60px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
                <p style="font-size: 1.3em;">Questions?</p>
                <p style="font-size: 1.1em; margin-top: 15px; opacity: 0.9;">This presentation covers the complete flow from API call to screen display</p>
            </div>
        </div>
    </div>

    <script>
        // Add smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Print functionality
        function printPresentation() {
            window.print();
        }

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                window.scrollBy({ top: window.innerHeight, behavior: 'smooth' });
            } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                window.scrollBy({ top: -window.innerHeight, behavior: 'smooth' });
            }
        });

        console.log('ğŸš€ OneMindAI Architecture Presentation Loaded');
        console.log('ğŸ“– Use Arrow Keys or Page Up/Down to navigate');
        console.log('ğŸ–¨ï¸ Press Ctrl+P to print');
    </script>
</body>
</html>
