# Railway Configuration for OneMind AI Backend
# This config deploys the backend API server from the /server directory

[build]
builder = "NIXPACKS"
# Install dependencies in the server directory
buildCommand = "cd server && npm install"

[deploy]
# Start the API server from the server directory
startCommand = "cd server && node ai-proxy.cjs"
healthcheckPath = "/health"
healthcheckTimeout = 300
numReplicas = 1
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[experimental]
# Allow Railway Edge to forward OPTIONS requests (required for CORS preflight)
allow_cors = true
