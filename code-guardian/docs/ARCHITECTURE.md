# ðŸ›¡ï¸ Code Guardian - Architecture & Process Diagram

## Overview

Code Guardian is an LLM-powered code impact analysis system that monitors file changes, analyzes their potential impact using GPT-4, and provides real-time feedback to developers.

---

## ðŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    CODE GUARDIAN SYSTEM                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           FRONTEND (Port 5174)                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚   Live Tab  â”‚  â”‚  Graph Tab  â”‚  â”‚ History Tab â”‚  â”‚   Alerts    â”‚            â”‚   â”‚
â”‚  â”‚  â”‚  Real-time  â”‚  â”‚ Dependency  â”‚  â”‚   Change    â”‚  â”‚   Toast     â”‚            â”‚   â”‚
â”‚  â”‚  â”‚  Analysis   â”‚  â”‚   Browser   â”‚  â”‚   Table     â”‚  â”‚ Notificationsâ”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                â”‚                    â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚  â”‚                                    â”‚                                             â”‚   â”‚
â”‚  â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚   â”‚
â”‚  â”‚                          â”‚  WebSocket Client â”‚                                  â”‚   â”‚
â”‚  â”‚                          â”‚   (Real-time)     â”‚                                  â”‚   â”‚
â”‚  â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                                  â”‚
â”‚                                       â”‚ WebSocket (ws://localhost:4000)                 â”‚
â”‚                                       â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           BACKEND SERVER (Port 4000)                             â”‚   â”‚
â”‚  â”‚                                                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚                         EXPRESS + WEBSOCKET                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  REST API    â”‚  â”‚  WebSocket   â”‚  â”‚  File        â”‚                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Endpoints   â”‚  â”‚  Server      â”‚  â”‚  Watcher     â”‚                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚  (Broadcast) â”‚  â”‚  (Chokidar)  â”‚                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                               â”‚                                    â”‚   â”‚
â”‚  â”‚                                               â”‚ File Change Event                  â”‚   â”‚
â”‚  â”‚                                               â–¼                                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚                        ANALYSIS PIPELINE                                 â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                                          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚  DEPENDENCY  â”‚    â”‚   CHANGE     â”‚    â”‚  LLM JUDGE   â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚   MAPPER     â”‚â”€â”€â”€â–¶â”‚  ANALYZER    â”‚â”€â”€â”€â–¶â”‚  (GPT-4)     â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚              â”‚    â”‚              â”‚    â”‚              â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚ â€¢ Parse AST  â”‚    â”‚ â€¢ Find deps  â”‚    â”‚ â€¢ Semantic   â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚ â€¢ Extract    â”‚    â”‚ â€¢ Detect     â”‚    â”‚   analysis   â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚   imports    â”‚    â”‚   breaking   â”‚    â”‚ â€¢ Risk score â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”‚ â€¢ Map deps   â”‚    â”‚   changes    â”‚    â”‚ â€¢ Suggest    â”‚             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                   â”‚                     â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                      â”‚                            â”‚   â”‚
â”‚  â”‚                                                      â”‚ Analysis Result            â”‚   â”‚
â”‚  â”‚                                                      â–¼                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚                        SUPABASE LOGGER                                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                                          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Store change history                                                 â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Query past analyses                                                  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Generate reports                                                     â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                                          â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ PostgreSQL
                                          â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚        SUPABASE             â”‚
                            â”‚                             â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚  â”‚    code_changes       â”‚  â”‚
                            â”‚  â”‚    (table)            â”‚  â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â”‚                             â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚  â”‚  high_risk_changes    â”‚  â”‚
                            â”‚  â”‚  (view)               â”‚  â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â”‚                             â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚  â”‚  daily_risk_summary   â”‚  â”‚
                            â”‚  â”‚  (view)               â”‚  â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â”‚                             â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FILE CHANGE DETECTION FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     Developer                                                              
        â”‚                                                                   
        â”‚ Saves file                                                        
        â–¼                                                                   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                              
   â”‚  IDE    â”‚                                                              
   â”‚ (VSCode)â”‚                                                              
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                              
        â”‚                                                                   
        â”‚ File system event                                                 
        â–¼                                                                   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      
   â”‚    Chokidar     â”‚  Watches: src/**/*.{ts,tsx,js,jsx}                  
   â”‚  File Watcher   â”‚           server/**/*.{js,cjs}                      
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      
            â”‚                                                               
            â”‚ 'change' event with file path                                 
            â–¼                                                               
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     
   â”‚                    ANALYSIS PIPELINE                             â”‚     
   â”‚                                                                  â”‚     
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     
   â”‚  â”‚ Step 1: DEPENDENCY MAPPER                                â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Input:  File path + content                             â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Process:                                                â”‚    â”‚     
   â”‚  â”‚  â€¢ Parse imports (default, named, dynamic)               â”‚    â”‚     
   â”‚  â”‚  â€¢ Parse exports (default, named)                        â”‚    â”‚     
   â”‚  â”‚  â€¢ Extract functions & components                        â”‚    â”‚     
   â”‚  â”‚  â€¢ Find React hooks usage                                â”‚    â”‚     
   â”‚  â”‚  â€¢ Detect API calls (fetch)                              â”‚    â”‚     
   â”‚  â”‚  â€¢ Find Supabase table references                        â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Output: FileDependency object                           â”‚    â”‚     
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     
   â”‚                             â”‚                                     â”‚     
   â”‚                             â–¼                                     â”‚     
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     
   â”‚  â”‚ Step 2: CHANGE ANALYZER                                  â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Input:  Changed file + Dependency Graph                 â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Process:                                                â”‚    â”‚     
   â”‚  â”‚  â€¢ Find direct dependents (files importing this)         â”‚    â”‚     
   â”‚  â”‚  â€¢ Find indirect dependents (2 levels deep)              â”‚    â”‚     
   â”‚  â”‚  â€¢ Categorize affected: components, hooks, APIs          â”‚    â”‚     
   â”‚  â”‚  â€¢ Detect breaking changes (removed exports)             â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Output: AffectedComponents object                       â”‚    â”‚     
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     
   â”‚                             â”‚                                     â”‚     
   â”‚                             â–¼                                     â”‚     
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     
   â”‚  â”‚ Step 3: LLM JUDGE (GPT-4)                                â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Input:  File content + Dependencies + Affected          â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Prompt includes:                                        â”‚    â”‚     
   â”‚  â”‚  â€¢ File path and content                                 â”‚    â”‚     
   â”‚  â”‚  â€¢ List of imports/exports                               â”‚    â”‚     
   â”‚  â”‚  â€¢ Affected components list                              â”‚    â”‚     
   â”‚  â”‚  â€¢ Request for JSON analysis                             â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  GPT-4 analyzes:                                         â”‚    â”‚     
   â”‚  â”‚  â€¢ What changed and why                                  â”‚    â”‚     
   â”‚  â”‚  â€¢ Potential bugs/issues                                 â”‚    â”‚     
   â”‚  â”‚  â€¢ Security vulnerabilities                              â”‚    â”‚     
   â”‚  â”‚  â€¢ Breaking changes                                      â”‚    â”‚     
   â”‚  â”‚  â€¢ Risk score (1-10)                                     â”‚    â”‚     
   â”‚  â”‚  â€¢ Recommendations                                       â”‚    â”‚     
   â”‚  â”‚                                                          â”‚    â”‚     
   â”‚  â”‚  Output: LLMAnalysis JSON                                â”‚    â”‚     
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     
   â”‚                             â”‚                                     â”‚     
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     
                                 â”‚                                           
                                 â”‚ Complete ChangeAnalysis                   
                                 â–¼                                           
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     
   â”‚                    OUTPUT DISTRIBUTION                           â”‚     
   â”‚                                                                  â”‚     
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚     
   â”‚  â”‚  WebSocket   â”‚  â”‚   Supabase   â”‚  â”‚   Console    â”‚          â”‚     
   â”‚  â”‚  Broadcast   â”‚  â”‚   Logger     â”‚  â”‚   Log        â”‚          â”‚     
   â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚     
   â”‚  â”‚ To all       â”‚  â”‚ Persist to   â”‚  â”‚ Server-side  â”‚          â”‚     
   â”‚  â”‚ connected    â”‚  â”‚ database     â”‚  â”‚ logging      â”‚          â”‚     
   â”‚  â”‚ clients      â”‚  â”‚              â”‚  â”‚              â”‚          â”‚     
   â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚     
   â”‚         â”‚                 â”‚                                     â”‚     
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     
             â”‚                 â”‚                                           
             â”‚                 â”‚                                           
             â–¼                 â–¼                                           
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   
   â”‚   Browser    â”‚    â”‚   Supabase   â”‚                                   
   â”‚   Dashboard  â”‚    â”‚   Database   â”‚                                   
   â”‚  (Port 5174) â”‚    â”‚              â”‚                                   
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   
```

---

## ðŸ”„ Component Interaction Sequence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SEQUENCE DIAGRAM                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Developer    IDE      FileWatcher    Server    DependencyMapper    ChangeAnalyzer    LLMJudge    Supabase    Dashboard
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚ Edit    â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚ File    â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚ Save       â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚ 'change'  â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚ event     â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ Broadcast    â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ 'analyzing'  â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ parseFile()  â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ FileDeps     â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ findAffected()                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ Affected     â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ analyze()    â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚ GPT-4 API â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚ Response  â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ Analysis     â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ logChange()  â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ Stored       â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ Broadcast    â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚ 'analysis_   â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚  complete'   â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚ Update UI  â”‚
    â”‚         â”‚            â”‚           â”‚              â”‚                  â”‚              â”‚           â”‚            â”‚
    â–¼         â–¼            â–¼           â–¼              â–¼                  â–¼              â–¼           â–¼            â–¼
```

---

## ðŸ“ File Structure

```
OneMindAI/
â”œâ”€â”€ server/
â”‚   â””â”€â”€ code-guardian/
â”‚       â”œâ”€â”€ index.cjs              # Main server (Express + WebSocket)
â”‚       â”œâ”€â”€ dependency-mapper.cjs  # AST parser for imports/exports
â”‚       â”œâ”€â”€ change-analyzer.cjs    # Finds affected components
â”‚       â”œâ”€â”€ llm-judge.cjs          # GPT-4 integration
â”‚       â”œâ”€â”€ supabase-logger.cjs    # Database logging
â”‚       â””â”€â”€ migrations/
â”‚           â””â”€â”€ 001_create_code_changes.sql  # Supabase schema
â”‚
â”œâ”€â”€ code-guardian/                 # Separate React app (UI Dashboard)
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts             # Fixed port 5174
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx
â”‚   â”‚   â”œâ”€â”€ App.tsx                # Dashboard UI
â”‚   â”‚   â”œâ”€â”€ index.css
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â””â”€â”€ client.ts          # WebSocket client
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ ARCHITECTURE.md        # This file
â”‚
â””â”€â”€ .env                           # API keys (OPENAI_API_KEY, SUPABASE_*)
```

---

## ðŸ”Œ API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/health` | GET | Health check |
| `/api/dependencies` | GET | Full dependency graph |
| `/api/dependencies/:file` | GET | Dependencies for specific file |
| `/api/affected/:file` | GET | Affected components for file |
| `/api/analyze` | POST | Manually trigger analysis |
| `/api/build-graph` | POST | Rebuild dependency graph |
| `/api/history` | GET | Change history |
| `/api/risk-summary` | GET | Risk statistics |
| `/api/validate-endpoints` | POST | Validate API endpoints |

---

## ðŸ—„ï¸ Database Schema

```sql
TABLE: code_changes
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ change_id (TEXT)           -- e.g., "change_1733667890123"
â”œâ”€â”€ file_path (TEXT)           -- e.g., "src/App.tsx"
â”œâ”€â”€ timestamp (TIMESTAMPTZ)
â”œâ”€â”€ duration_ms (INTEGER)
â”œâ”€â”€ risk_score (INTEGER 0-10)
â”œâ”€â”€ risk_level (TEXT)          -- 'low', 'medium', 'high'
â”œâ”€â”€ summary (TEXT)
â”œâ”€â”€ intent (TEXT)
â”œâ”€â”€ llm_provider (TEXT)        -- 'openai', 'anthropic', etc.
â”œâ”€â”€ potential_issues (JSONB)
â”œâ”€â”€ breaking_changes (JSONB)
â”œâ”€â”€ affected_areas (JSONB)
â”œâ”€â”€ recommendations (JSONB)
â”œâ”€â”€ tests_needed (JSONB)
â”œâ”€â”€ dependencies (JSONB)
â””â”€â”€ affected_components (JSONB)

VIEWS:
â”œâ”€â”€ high_risk_changes          -- Recent changes with risk >= 7
â”œâ”€â”€ daily_risk_summary         -- Aggregated daily stats
â””â”€â”€ most_changed_files         -- Files with most changes

FUNCTIONS:
â””â”€â”€ get_risk_summary(days)     -- Risk stats for time period
```

---

## ðŸš€ Quick Start

```bash
# 1. Install dependencies
npm run guardian:install

# 2. Run Supabase migration (in Supabase SQL Editor)
# Copy contents of: server/code-guardian/migrations/001_create_code_changes.sql

# 3. Start Code Guardian (both server and UI)
npm run guardian:all

# Or separately:
npm run guardian      # Backend (port 4000)
npm run guardian:ui   # Frontend (port 5174)
```

---

## ðŸ”‘ Environment Variables

```env
# Required for LLM analysis
OPENAI_API_KEY=sk-...

# Required for database logging
VITE_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_KEY=eyJ...
```

---

## ðŸ“ˆ Risk Scoring

| Score | Level | Color | Meaning |
|-------|-------|-------|---------|
| 0-3 | Low | ðŸŸ¢ Green | Safe change, minimal impact |
| 4-6 | Medium | ðŸŸ¡ Yellow | Some risk, review recommended |
| 7-10 | High | ðŸ”´ Red | Significant risk, careful review needed |

Risk factors:
- Number of direct dependents
- Breaking changes (removed exports)
- API endpoint modifications
- Database table changes
- Security issues detected
- Code complexity
